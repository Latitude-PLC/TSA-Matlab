#!/bin/csh
#
# SGE script for MATLAB standalone (generated with mcc)
#
# Submit job with the command: scc1% qsub batch_standalone
# To submit multiple batch jobs: scc1% submitmjobs 1 batch_standalone
# (See submitmjobs for instructions)
#
# Note: A line of the form "#$ qsub_option" is interpreted by qsub
#       as if "qsub_option" was passed to qsub on the commandline.
#
echo "\n\n********************************************"
echo "* This job runs on $HOSTNAME"
echo "********************************************\n\n"

set NODENAME = `echo $HOSTNAME | sed 's/.scc.bu.edu//'`

# Running MATLAB standalone results in creation of a cache folder in home dir
# This may cause runtime issues. Below is a workaround.
echo tmpdir is $TMPDIR
setenv MCR_CACHE_ROOT $TMPDIR
echo "\n\n********************************************"
echo "* Created local scratch folder /net/$NODENAME$TMPDIR"
echo "********************************************\n\n"

# Ready to run standalone with commandline inputs (if required). For
# multicores, use $NSLOTS requested by you in #$ -pe above
# Output to screen go to your ?.o$JOB_ID file
# The below environment variables are generated by the companion script
# submitmjobs and passed to this script to distinquish one task from another
# $MATLAB_TASK --- processor number
# $MATLAB_NTASKS --- processor total
@ task = $MATLAB_TASK;
@ ntasks = $MATLAB_NTASKS;
~/ccdc_exe8_1 $task $ntasks

# This new line is used for make it run!
